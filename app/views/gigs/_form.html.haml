= form_for @gig do |f|
  -if @gig.errors.any?
    #errorExplanation
      %h2= "#{pluralize(@gig.errors.count, "error")} prohibited this gig from being saved:"
      %ul
        - @gig.errors.full_messages.each do |msg|
          %li= msg

  .field
    = f.label :title
    = f.text_field :title
  .field
    = f.label :company
    = f.text_field :company
  - if user_signed_in?
    .field
      = f.label :org_id
      = f.collection_select :org_id, current_user.memberships, :id, :name, :prompt => 'none'
  .field
    = f.label :description
    = f.text_area :description
  .field
    = f.label :contact_first_name
    = f.text_field :contact_first_name
  .field
    = f.label :contact_last_name
    = f.text_field :contact_last_name
  .field
    = f.label :contact_email
    = f.text_field :contact_email
  .field
    = f.label :city
    = f.text_field :city
  .field
    = f.label :state
    = f.text_field :state
  .field
    = f.label :country
    = f.text_field :country
  .field
    = f.label :post_at
    = f.text_field :post_at
  .field
    = f.label :expire_at
    = f.text_field :expire_at
  :javascript
    $(function(){
      var dates = $('#gig_post_at, #gig_expire_at').datepicker({ 
        onSelect: function( selectedDate ) {
          var option = this.id == "from" ? "minDate" : "maxDate",
            instance = $( this ).data( "datepicker" );
          date = $.datepicker.parseDate(
            instance.settings.dateFormat ||
            $.datepicker._defaults.dateFormat,
            selectedDate, instance.settings );
          dates.not( this ).datepicker( "option", option, date );
        }
      });
    });
  .field
    = f.label :enabled
    = f.check_box :enabled
  .actions
    = f.submit 'Save'
